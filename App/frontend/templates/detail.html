{% extends "base.html" %}

{% block title %}Detail Movie{% endblock %}

{% block content %}
<section class="section-detail-movie">
  <div class="box-detail"></div>
  <div class="detail-video">
    <iframe class="main-video" id="trailer-player" src="" frameborder="0" allowfullscreen
      allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; "
      style="width: 100%; height: 400px;">
    </iframe>
    <p style="font-weight: bold;margin-bottom: -10px;font-size: 20px;">Summary</p>
    <p class="summary">
    </p>

  </div>
  <div class="detail-rating">
    <h2 class="detail-movie-title"></h2>
    <div class="detail-underline"></div>
    <div class="meta-label">METASCORE</div>
    <div class="score-container">
      <div class="score-info">
        <div class="score-description"></div>
        <div class="score-details">Based on 20 Critic Reviews</div>
      </div>
      <div class="score-box"></div>
    </div>
    <div class="rating-bar">
      <div class="positive-bar"></div>
      <div class="mixed-bar"></div>
      <div class="negative-bar"></div>
    </div>
    <div class="detail-genre">
      <p style="color:gray;letter-spacing: 1px;">Genre</p>
      <div class="movie-genre-container">
        <!-- auto genre -->
      </div>
    </div>
    <div class="detail-myscore">
      <p style="color:gray; letter-spacing: 1px; margin-bottom: 5px;">MY SCORE</p>
      <div class="circle-score" id="circleScore"></div>
      <div class="rating-container">
        <div class="score-description" id="scoreDescription">Chưa đánh giá</div>
        <div class="myscore-bar" id="scoreBar">
          <div class="piece-score-bar piece-1" data-score="1"></div>
          <div class="piece-score-bar piece-2" data-score="2"></div>
          <div class="piece-score-bar piece-3" data-score="3"></div>
          <div class="piece-score-bar piece-4" data-score="4"></div>
          <div class="piece-score-bar piece-5" data-score="5"></div>
          <div class="piece-score-bar piece-6" data-score="6"></div>
          <div class="piece-score-bar piece-7" data-score="7"></div>
          <div class="piece-score-bar piece-8" data-score="8"></div>
          <div class="piece-score-bar piece-9" data-score="9"></div>
          <div class="piece-score-bar piece-10" data-score="10"></div>
        </div>
      </div>

      <button class="review-btn post-myreview" onclick="openModal()">Add My Review</button>

    </div>
  </div>
  <!-- form rating reviews -->
  <div class="modal-overlay" id="modalOverlay" onclick="closeModal(event)">
    <div class="modal" onclick="event.stopPropagation()">
      <div class="modal-header">
        <h2 class="modal-title">Add My Review</h2>
        <button class="close-btn" onclick="closeModal()">×</button>
      </div>

      <div class="modal-content">
        <div class="movie-info-modal">
          <div class="movie-poster-small"></div>
          <div class="movie-details">
            <div class="movie-title-modal">Jurassic World Rebirth</div>
            <div class="release-date">Release Date : Jul 2, 2025</div>
          </div>
        </div>

        <div class="score-section-modal">
          <p style="color:gray; letter-spacing: 1px; margin-bottom: 5px;">MY SCORE</p>
          <div class="score-display">
            <div class="score-circle-modal" id="scoreCircle">0</div>
            <div class="score-info">
              <div class="score-description" id="scoreText">Select a rating</div>
              <div class="rating-container">
                <div class="rating-bar" id="ratingBar">
                  <div class="rating-segments" id="ratingSegments">
                    <!-- Segments will be generated by JavaScript -->
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="review-section">
          <div class="review-label">Write a review for <em>Jurassic World Rebirth</em></div>
          <textarea class="review-textarea"
            placeholder="Share your thoughts about this movie... (minimum 75 characters)"
            oninput="updateCharacterCount(this)" maxlength="5000" id="reviewText"></textarea>
          <div class="character-info">
            <span class="char-requirement needed" id="minCharInfo">Minimum 75 characters needed</span>
            <span id="charCount">5000 characters remaining</span>
          </div>
        </div>

      </div>

      <!-- Form buttons at the bottom -->
      <div class="form-buttons">
        <button class="btn btn-cancel" onclick="closeModal()">Cancel</button>
        <button class="btn btn-post" id="postBtn" disabled onclick="submitReview()">Post</button>
      </div>
    </div>
  </div>
</section>


<!-- comment user -->

<section class="section-user-reviews">
  <div class="featured-title-group">
    <h2 class="section-title">User Reviews</h2>
    <div class="featured-underline featured-underline-1"></div>
  </div>
  <div class="list-comment">
    <div class="comment">
      <div class="score-box score-comment">71</div>
      <h3>Trailer Nilou</h3>
      <div class="date-comment">Jul,3,2025</div>
      <p class="comment-text" style="grid-area: comment;">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed
        do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
      <a href="#" class="read-more" style="grid-area: read;">
        <p>Read more</p>
      </a>
      <div class="detail-underline" style="grid-area: line"></div>
      <p class="user-name" style="grid-area:user">By Văn Đạo</p>
    </div>
    <div class="comment">
      <div class="score-box score-comment">71</div>
      <h3>Trailer Nilou</h3>
      <div class="date-comment">Jul,3,2025</div>
      <p class="comment-text" style="grid-area: comment;">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed
        do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
      <a href="#" class="read-more" style="grid-area: read;">
        <p>Read more</p>
      </a>
      <div class="detail-underline" style="grid-area: line"></div>
      <p class="user-name" style="grid-area:user">By Văn Đạo</p>
    </div>
  </div>
  <div class="review-all">
    <a href="#" class="btn btn-review">See All 51 User Reviews</a>
  </div>
</section>


<!-- recomment movies -->

<section class="section">
  <div class="section-header">
    <div class="featured-title-group">
      <h2 class="section-title">Related Movies</h2>
      <div class="featured-underline"></div>
    </div>
    <div class="navigation-arrows">
      <div class="arrow arrow-left" data-target="related-grid">
        <img src="/static/img/arrow left.png" alt="Previous">
      </div>
      <div class="arrow arrow-right" data-target="related-grid">
        <img src="/static/img/arrow right.png" alt="Next">
      </div>
    </div>
  </div>

  <div class="movie-list-container">
    <div class="movie-list-small" id="related-grid">

    </div>
</section>



<script src="https://www.youtube.com/iframe_api"></script>
<script src="/static/js/auth/user_log.js"></script>
<script type="module" src="/static/js/utils/scoreBar.js"></script>
<script type="module" src="/static/js/reviews/scoreRating.js"></script>



{% endblock %}
